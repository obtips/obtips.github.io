<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="github-light" data-light-theme="light_tritanopia" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    <script src='https://red.237927.xyz/assets/GmeekVercount.js'></script><script src='https://red.234927.xyz/assets/yifantheme.js'></script>
    <link rel="icon" href="https://red.237927.xyz/avatar.svg">
<meta name="description" content="[Swiftå®˜æ–¹æ–‡æ¡£åŒæ­¥çš„ä¸­æ–‡å¿«é€Ÿå…¥é—¨æ•™ç¨‹](https://github.com/YugenFring/swift-tutorial-quickstart/wiki)

æ„é€ æ˜¯ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºå‰çš„å‡†å¤‡å·¥ä½œ, å…¶é€šè¿‡æ„é€ å‡½æ•°å®ç°
## [ä¸ºå­˜å‚¨å€¼è®¾ç½®åˆå§‹å€¼ (Setting Initial Values for Stored Properties)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization#Setting-Initial-Values-for-Stored-Properties)
---
### [æ„é€ å‡½æ•° (Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializers)

ğŸ• ä½¿ç”¨ `init` åˆ›å»ºæ„é€ å‡½æ•°:
```swift
struct Db {
    var rows: Int
    init() {
        rows = 10
    }
}
```

ğŸ•‘ è°ƒç”¨æ„é€ å‡½æ•°:
```swift
var db = Db()
print(db.rows) // 10
```
### [é»˜è®¤å±æ€§å€¼ (Default Property Values)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Default-Property-Values)

ä¸Šè¿°ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡å±æ€§èµ‹é»˜è®¤å€¼å®ç°:
```swift
struct Db {
    var rows = 10
}
```

> å¦‚æœå®ä¾‹ä¸­çš„å±æ€§çš„é»˜è®¤å€¼æ€»æ˜¯å›ºå®šçš„, é‚£ä¹ˆæœ€å¥½ä½¿ç”¨'é»˜è®¤å±æ€§å€¼'; ä»è¯­æ³•å’Œæ€§èƒ½ä¸Šéƒ½æ›´ä½³
## [å®šåˆ¶æ„é€ å‡½æ•° (Customizing Initialization)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Customizing-Initialization)
---
### [åˆå§‹åŒ–å‚æ•° (Initialization Parameters)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initialization-Parameters)

å¯ä»¥ç»™æ„é€ å‡½æ•°æ·»åŠ å‚æ•°:
```swift
struct Exchange {
    var n: Double
    init(fromUS x: Double) {
        n = x * 7.12
    }
    init(fromJP y: Double) {
        n = y * 0.0048
    }
}

let s1 = Exchange(fromUS: 100)
let s2 = Exchange(fromJP: 100)
print(s1.n, s2.n)
```
### [å‚æ•°åå’Œå®å‚æ ‡ç­¾ (Parameter Names and Argument Labels)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Parameter-Names-and-Argument-Labels)

ğŸ• é€šè¿‡å‚æ•°åå’Œç±»å‹æ¥åŒºåˆ†å¤šä¸ªæ„é€ å‡½æ•°:
```swift
struct Point {
    let x, y, z: Double
    init(x: Double, y: Double, z: Double) {
        self.x = x
        self.y = y
        self.z = z
    }
    init(s: Double) {
        x = s
        y = s
        z = s
    }
}
```

ğŸ•‘ è°ƒç”¨æ—¶å¿…é¡»æŒ‡æ˜å®å‚æ ‡ç­¾:
```swift
let a = Point(x: 1.0, y: 2.1, z: 3.2)
let b = Point(s: 1.8)
```
å¦‚æœæ²¡æœ‰è®¾ç½®å®å‚æ ‡ç­¾, åˆ™ä¼šè‡ªåŠ¨å°†å‚æ•°åè®¾ç½®ä¸ºå®å‚æ ‡ç­¾
### [å¿½ç•¥å®å‚æ ‡ç­¾ (Initializer Parameters Without Argument Labels)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Parameters-Without-Argument-Labels)

ä½¿ç”¨ `_` å¿½ç•¥å®å‚æ ‡ç­¾:
```swift
struct Db {
    var rows: Int
    init(_ num: Int) {
        rows = num
    }
}

var db = Db(10)
```
### [å¯é€‰å€¼ç±»å‹ (Optional Property Types)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Optional-Property-Types)

å¯é€‰å€¼ç±»å‹åœ¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨èµ‹å€¼ä¸º `nil`
### [åˆå§‹åŒ–æ—¶è®¿é—®å¸¸é‡å€¼ (Assigning Constant Properties During Initialization)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Assigning-Constant-Properties-During-Initialization)

å¸¸é‡ä¸€æ—¦èµ‹å€¼åå°±ä¸èƒ½å†ä¿®æ”¹
## [é»˜è®¤æ„é€ å‡½æ•° (Default Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Default-Initializers)
---
`struct` æˆ– `class` ä¼šè‡ªåŠ¨æä¾›æ„é€ å‡½æ•°æ¥å®Œæˆå±æ€§å€¼èµ‹å€¼çš„è¿‡ç¨‹ (å½“æ²¡æœ‰è‡ªå®šä¹‰æ„é€ å‡½æ•°æ—¶)
### [ç»“æ„ä½“çš„æˆå‘˜å¼æ„é€ å‡½æ•° (Memberwise Initializers for Structure Types)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Memberwise-Initializers-for-Structure-Types)
ğŸ• æ²¡æœ‰å…¶ä»–åˆæ„é€ å‡½æ•°æ—¶, ç»“æ„ä½“ä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªå±æ€§æä¾›æ„é€ å‡½æ•°:
```swift
struct Point {
    var x = 0.0, y = 0.0
}
```

ğŸ•‘ è°ƒç”¨å…¶æ„é€ å‡½æ•°:
```swift
let point1 = Point(y: 20.0)
let point2 = Point(x: 10.0)
let point3 = Point(x: 3.0, y: 4.0)
```
## [å€¼ç±»å‹çš„åˆå§‹åŒ–å§”æ´¾ (Initializer Delegation for Value Types)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Delegation-for-Value-Types)
---
ğŸ• æ„é€ å‡½æ•°ä¸­å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°, ä½¿ç”¨ `self.init()`

ğŸ•‘ å¦‚æœè‡ªå®šä¹‰äº†æ„é€ å‡½æ•°, åˆ™é»˜è®¤æ„é€ å‡½æ•°æˆ–æˆå‘˜å¼æ„é€ å‡½æ•°å°†ä¸å¯ç”¨
### ç¤ºä¾‹

ğŸ• å®šä¹‰ä¸€ä¸ªåŒ…å« 3 ä¸ªæ„é€ å‡½æ•°çš„å€¼ç±»å‹:
```swift
struct Point {
    var x = 0.0
    var y = 0.0
    var z = 0.0
    init() {}
    init(x: Double, y: Double, z: Double) {
        self.x = x
        self.y = y
        self.z = z
    }
    init(x: Double, y: Double) {
        let newX = x * 10
        let newY = y * 5
        let newZ = (newX * newY) / 2
        self.init(x: newX, y: newY, z: newZ)
    }
}
```

ğŸ• è°ƒç”¨å…¶æ— å‚æ„é€ å‡½æ•° (è¡Œä¸ºåŒé»˜è®¤æ„é€ å‡½æ•°):
```swift
var p1 = Point()
```

ğŸ•‘ è°ƒç”¨å…¶æœ‰å‚æ„é€ å‡½æ•° (è¡Œä¸ºåŒæˆå‘˜å¼æ„é€ å‡½æ•°):
```swift
var p2 = Point(x: 1.2, y: 1.6, z: 2.8)
```

ğŸ•’ è°ƒç”¨å…·æœ‰åˆå§‹åŒ–å§”æ´¾è¡Œä¸ºçš„æ„é€ å‡½æ•°:
```swift
var p3 = Point(x: 3.2, y: 2.1)
```
## [ç±»çš„ç»§æ‰¿å’Œæ„é€  (Class Inheritance and Initialization)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Class-Inheritance-and-Initialization)
---
è¦ç¡®ä¿æœ¬èº«å®šä¹‰çš„å€¼å’Œç»§æ‰¿æ¥çš„å€¼åœ¨æ„é€ åéƒ½å…·æœ‰åˆå§‹å€¼
### [è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•° (Designated Initializers and Convenience Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Designated-Initializers-and-Convenience-Initializers)

- è®¾è®¡æ„é€ å‡½æ•°: ç¡®ä¿æ‰€æœ‰å±æ€§è¢«æ„é€ åŒ– (å¿…é¡»è¦æœ‰ä¸€ä¸ª)
- ä¾¿åˆ©æ„é€ å‡½æ•°: è°ƒç”¨è®¾è®¡æ„é€ å‡½æ•°, å¯¹æ„é€ è¿‡ç¨‹è¿›è¡Œç®€åŒ–, (æŒ‰æƒ…å†µæ·»åŠ )
### [è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°çš„è¯­æ³• (Syntax for Designated and Convenience Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Syntax-for-Designated-and-Convenience-Initializers)

ğŸ• è®¾è®¡æ„é€ å‡½æ•°:
```swift
init(<#parameters#>) {
   <#statements#>
}
```

ğŸ•‘ ä¾¿åˆ©æ„é€ å‡½æ•°:
```swift
convenience init(<#parameters#>) {
   <#statements#>
}
```
### [ç±»çš„æ„é€ å§”æ‰˜ (Initializer Delegation for Class Types)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Delegation-for-Class-Types)

ğŸ• è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°ç¬¦åˆä»¥ä¸‹ 3 æ¡è§„åˆ™:
- è®¾è®¡æ„é€ å‡½æ•°å¿…é¡»ä»å…¶ç›´æ¥çˆ¶ç±»ä¸­è°ƒç”¨ä¸€ä¸ªè®¾è®¡æ„é€ å‡½æ•°
- ä¾¿åˆ©æ„é€ å‡½æ•°åªèƒ½è°ƒç”¨å½“å‰ç±»ä¸­å…¶ä»–çš„æ„é€ å‡½æ•°
- ä¾¿åˆ©æ„é€ å‡½æ•°æœ€ç»ˆä¸€å®šä¼šè°ƒç”¨ä¸€ä¸ªè®¾è®¡æ„é€ å‡½æ•°

ğŸ•‘ å¦‚ä¸‹å›¾æ‰€ç¤º:
![[Pasted image 20240122133125.png|400]]

ğŸ•’ æ›´å¤æ‚çš„å½¢å¼:
![[Pasted image 20240125110357.png|400]]
### [æ„é€ çš„ä¸¤ä¸ªé˜¶æ®µ (Two-Phase Initialization)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Two-Phase-Initialization)

ğŸ• æ„é€ åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ:
1. ç»™æ‰€æœ‰å­˜å‚¨å±æ€§å€¼èµ‹å€¼
2. å¯¹å®ä¾‹ä¸­çš„å±æ€§è¿›è¡Œä¿®æ”¹ (å®šåˆ¶æ“ä½œ)

ğŸ•‘ ä¸ºäº†ç¡®ä¿æ„é€ çš„å®‰å…¨, ç¼–è¯‘å™¨ä¼šè¿›è¡Œä»¥ä¸‹ 4 ä¸ªæ£€æŸ¥:
- åœ¨è°ƒç”¨çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°å‰, å¿…é¡»ç¡®ä¿é€šè¿‡è‡ªèº«çš„è®¾è®¡æ„é€ å‡½æ•°å°†ä¸ºæ‰€æœ‰å±æ€§è®¾å®šåˆå§‹åŒ–å€¼
- åœ¨ç»™ç»§æ‰¿å±æ€§èµ‹å€¼ä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°, å¦åˆ™ä¼šè¢«çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°è¦†ç›–æ‰
- ä¾¿åˆ©æ„é€ å‡½æ•°åœ¨ç»™ä»»ä½•å±æ€§èµ‹å€¼å‰å¿…é¡»å…ˆè°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°, å¦åˆ™ä¼šè¢«è‡ªèº«çš„è®¾è®¡æ„é€ å‡½æ•°è¦†ç›–
- åªæœ‰æ„é€ çš„ç¬¬ä¸€é˜¶æ®µç»“æŸå, æ‰èƒ½è°ƒç”¨å®ä¾‹ä¸­çš„æ–¹æ³•, è®¿é—®å®ä¾‹ä¸­çš„å±æ€§å€¼ç­‰

ğŸ•’ è¿™æ˜¯ä¸€ä¸ªæ„é€ ç¬¬ä¸€é˜¶æ®µçš„è°ƒç”¨é“¾å›¾ç¤º, ç¡®ä¿æ‰€æœ‰å±æ€§å€¼éƒ½æœ‰åˆå§‹å€¼:
![[Pasted image 20240125140333.png|400]]

éšåç¬¬äºŒé˜¶æ®µçš„å®šåˆ¶æ“ä½œå¼€å§‹æ‰§è¡Œ:
![[Pasted image 20240125140508.png|400]]
### [æ„é€ å‡½æ•°çš„ç»§æ‰¿ä¸é‡å†™ (Initializer Inheritance and Overriding)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Inheritance-and-Overriding)

- é»˜è®¤å­ç±»ä¸ä¼šç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°, å› ä¸ºè¶…ç±»çš„æ„é€ å‡½æ•°ä¸ä¸€å®šèƒ½å¤Ÿæ»¡è¶³å­ç±»çš„è¦æ±‚
- å¦‚æœå­ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¸è¶…ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ç›¸åŒ, è¦åŠ ä¸Š `override`
- å¦‚æœå­ç±»çš„æ„é€ å‡½æ•°ä¸çˆ¶ç±»çš„ä¾¿åˆ©æ„é€ å‡½æ•°ç›¸åŒ, ä¸éœ€è¦åŠ  `override`, å› ä¸ºæŒ‰ç…§ä¹‹å‰çš„è§„åˆ™, å­ç±»æ˜¯æ— æ³•ç›´æ¥è°ƒç”¨çˆ¶ç±»çš„ä¾¿åˆ©æ„é€ å‡½æ•°
#### ç¤ºä¾‹

ğŸ• å®šä¹‰ä¸€ä¸ªåŸºç±»å¹¶è°ƒç”¨:
```swift
class Pet {
    var age = 0
    var say: String {
        return 'I'm \(age) years old.'
    }
}

var p = Pet()
print(p.say) // I'm 0 years old.
```
è¿™é‡Œè‡ªåŠ¨æä¾›äº†è®¾è®¡æ„é€ å‡½æ•°

ğŸ•‘ åˆ›å»ºä¸€ä¸ªå­ç±»å¹¶é‡å†™åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°:
```swift
class Cat: Pet {
    override init() {
        super.init()
        age = 2
    }
}

var c = Cat()
print(c.say) // I'm 2 years old.
```
å› ä¸ºé‡å†™äº†åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°, å› è€Œéœ€è¦ `override`

ğŸ•’ åˆ›å»ºä¸€ä¸ªå­ç±»éšå¼è°ƒç”¨åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°:
```swift
class Dog: Pet {
    var name: String
    init(name: String) {
        self.name = name
        // super.init() éšå¼è°ƒç”¨
    }
    override var say: String {
        return '\(super.say) And call me \(name)'
    }
}

var d = Dog(name: 'Chichi')
print(d.say) // I'm 0 years old. And call me Chichi
```
å› ä¸ºå­ç±»æ²¡æœ‰è¿›è¡Œå®šåˆ¶æ“ä½œ, æ‰€ä»¥åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¼šè¢«éšå¼è°ƒç”¨
### [æ„é€ å‡½æ•°çš„è‡ªåŠ¨ç»§æ‰¿ (Automatic Initializer Inheritance)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Automatic-Initializer-Inheritance)

å¦‚æœå­ç±»ä¸­æ–°å¢çš„å±æ€§éƒ½æä¾›äº†é»˜è®¤å€¼, åˆ™:
- å­ç±»æ²¡æœ‰æä¾›è®¾è®¡æ„é€ å‡½æ•°, åˆ™è¶…ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¼šè¢«è‡ªåŠ¨ç»§æ‰¿
- å­ç±»å®ç°æˆ–ç»§æ‰¿äº†å…¶è¶…ç±»çš„æ‰€æœ‰çš„è®¾è®¡æ„é€ å‡½æ•°, åˆ™è‡ªåŠ¨ç»§æ‰¿è¶…ç±»çš„æ‰€æœ‰ä¾¿åˆ©æ„é€ å‡½æ•°
### [è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°çš„åº”ç”¨ (Designated and Convenience Initializers in Action)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Designated-and-Convenience-Initializers-in-Action)

ğŸ• åŸºç±»:
```swift
class Food {
    var name: String
    init(name: String) {
        self.name = name
    }
    convenience init() {
        self.init(name: '[Unnamed]')
    }
}
```

![[Pasted image 20240122171918.png|400]]

ğŸ•‘ åˆ›å»º `Food` çš„å­ç±», é‡å†™ `init` ä¸ºä¾¿åˆ©æ„é€ å‡½æ•°:
```swift
class RecipeIngredient: Food {
    var quantity: Int
    init(name: String, quantity: Int) {
        self.quantity = quantity
        super.init(name: name)
    }
    override convenience init(name: String) {
        self.init(name: name, quantity: 1)
    }
}
```

![[Pasted image 20240122172017.png|400]]

ğŸ•’ åˆ›å»º `RecipeIngredient` çš„å­ç±»:
```swift
class ShoppingListItem: RecipeIngredient {
    var purchased = false
    var description: String {
        var output = '\(quantity) x \(name)'
        output += purchased ? ' âœ”' : ' âœ˜'
        return output
    }
}
```
å› ä¸ºå…¶æ‰€æœ‰å±æ€§éƒ½å…·æœ‰é»˜è®¤å€¼, å¹¶ä¸”æ²¡æœ‰è‡ªå®šä¹‰ä»»ä½•æ„é€ å‡½æ•°, å› è€Œè‡ªåŠ¨ç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°

![[Pasted image 20240122172224.png|400]]
## [å¯å¤±è´¥çš„æ„é€ å‡½æ•° (Failable Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers)

ğŸ• ä½¿ç”¨ `?` æ ‡è®°è¯¥æ„é€ å‡½æ•°å¯èƒ½ä¼šå¤±è´¥, æ­¤æ—¶å°†è¿”å›è¯¥å®ä¾‹ç±»å‹çš„å¯é€‰å€¼:
```swift
struct Pet {
    let name: String
    init?(name: String) {
        if name.isEmpty { return nil }
        self.name = name
    }
}
```
ä½¿ç”¨ `retrun nil` è¡¨ç¤ºæ„é€ å¤±è´¥

ğŸ•‘ è°ƒç”¨å¹¶è§£åŒ…å¯é€‰å€¼:
```swift
let c = Pet(name: 'mimi')

if let cat = c {
    print(cat.name)
}
```

ğŸ•’ å¯é€‰å€¼ä¸ºç©ºå¯ç›´æ¥åˆ¤æ–­:
```swift
let d = Pet(name: '')

if d == nil {
    print('error')
}
```
### [æšä¸¾ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•° (Failable Initializers for Enumerations)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers-for-Enumerations)

ğŸ• åŸºç¡€ç¤ºä¾‹:
```swift
enum Pet {
    case cat, dog, rabbit
    init?(type: Character) {
        switch type {
        case 'c':
            self = .cat
        case 'd':
            self = .dog
        case 'r':
            self = .rabbit
        default:
            return nil
        }
    }
}
```

ğŸ•‘ è°ƒç”¨ç¤ºä¾‹:
```swift
let p = Pet(type: 'c')
if p != nil {
    print('cat')
}
```
### [å¸¦åŸå§‹å€¼çš„æšä¸¾ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•° (Failable Initializers for Enumerations with Raw Values)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers-for-Enumerations-with-Raw-Values)

å¸¦æœ‰åŸå§‹å€¼çš„æšä¸¾ç±»ä¼šè‡ªåŠ¨æ¥å— `init?(rawValue: )`

ğŸ• é‡‡ç”¨è¿™ç§æ–¹å¼å¯¹ä¸Šé¢çš„æšä¸¾ç±»é‡å†™:
```swift
enum Pet: Character {
    case cat = 'c', dog = 'd', rabbit = 'r'
}
```

ğŸ•‘ è°ƒç”¨ç¤ºä¾‹:
```swift
let p = Pet(rawValue: 'c')
if p != nil {
    print('cat')
}
```
### [åˆå§‹åŒ–å¤±è´¥çš„ä¼ æ’­ (Propagation of Initialization Failure)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Propagation-of-Initialization-Failure)

ç®€å•çš„è¯´å°±æ˜¯é€šè¿‡ç»§æ‰¿é“¾æˆ–è°ƒç”¨é“¾è¿›è¡Œä¼ æ’­

ğŸ• åˆ›å»ºä¸€ä¸ªåŸºç±»:
```swift
class Pet {
    let name: String
    init?(name: String) {
        if name.isEmpty {return nil}
        self.name = name
    }
}
```

ğŸ•‘ ä¸€ä¸ªå­ç±»è°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°:
```swift
class Cat: Pet {
    let age: Int
    init?(name: String, age: Int) {
        if age < 2 { return nil }
        self.age = age
        super.init(name: name)
    }
}
```
å› ä¸ºå­ç±»çš„æ„é€ å‡½æ•°æ˜¯å¯å¤±è´¥çš„, å…¶æ‰èƒ½å¤Ÿè°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°, å¹¶ä¸”ä¸éœ€è¦åŠ  `?`

ğŸ•’ è°ƒç”¨ç¤ºä¾‹:
```swift
if let c = Cat(name: 'mimi', age: 10) {
    print(c.name, c.age)
}
```
### [é‡å†™å¯å¤±è´¥çš„æ„é€ å‡½æ•° (Overriding a Failable Initializer)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Overriding-a-Failable-Initializer)

å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°ä¸ºæ™®é€šæ„é€ å‡½æ•°, åä¹‹ä¸è¡Œ

ğŸ• ç®€å•ç¤ºä¾‹, åˆ›å»ºä¸€ä¸ªåŸºç±»:
```swift
class Pet {
    var name: String?
    init() {}
    init?(name: String) {
        if name.isEmpty { return nil }
        self.name = name
    }
}
```

ğŸ•‘ åˆ›å»ºä¸€ä¸ªå­ç±»é‡å†™åŸºç±»çš„æ„é€ å‡½æ•°:
```swift
class Cat: Pet {
    override init() {
        super.init()
        self.name = '[Unknown]'
    }
    override init(name: String) {
        super.init()
        if name.isEmpty {
            self.name = '[Unknown]'
        } else {
            self.name = name
        }
    }
}
```

ğŸ•’ åˆ›å»ºä¸€ä¸ªå­ç±»é‡å†™åŸºç±»çš„æ„é€ å‡½æ•°, å¹¶è°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°:
```swift
class Dog: Pet {
    override init() {
        super.init(name: '[Unknown]')!
    }
}
```
æ­¤æ—¶è¦åŠ ä¸Š `!`, è¿™è¡¨ç¤ºä½ è®¤ä¸ºè¿™æ ·å·²ç»ç»å¯¹å®‰å…¨äº†
### [éšå¼è§£åŒ…çš„å¯å¤±è´¥æ„é€ å‡½æ•° (The init! Failable Initializer)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#The-init-Failable-Initializer)

ä¹Ÿå°±æ˜¯ `init!()`
## [å¿…è¦çš„æ„é€ å‡½æ•° (Required Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Required-Initializers)

ğŸ• åœ¨æ„é€ å‡½æ•°å‰ä½¿ç”¨ `required` å…³é”®å­—æ ‡æ˜å­ç±»éƒ½å¿…é¡»è¦å®ç°è¯¥æ„é€ å‡½æ•°:
```swift
class SomeClass {
    required init() {
        // initializer implementation goes here
    }
}
```

ğŸ•‘ åœ¨å­ç±»ä¸­å®ç°è¯¥æ„é€ å‡½æ•°ä¹Ÿå¿…é¡»åŠ ä¸Š `required`, æ­¤æ—¶ä¸å¿…ä½¿ç”¨ `override`
```swift
class SomeSubclass: SomeClass {
    required init() {
        // subclass implementation of the required initializer goes here
    }
}
```
## [ä½¿ç”¨é—­åŒ…æˆ–å‡½æ•°è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ (Setting a Default Property Value with a Closure or Function)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Setting-a-Default-Property-Value-with-a-Closure-or-Function)

ğŸ• åŸºæœ¬ç»“æ„:
```swift
class SomeClass {
    let someProperty: SomeType = {
        return someValue
    }()
}
```

ğŸ•‘ é—­åŒ…æ˜¯åœ¨æ„é€ çš„è¿‡ç¨‹ä¸­æ‰§è¡Œçš„, è¿™æ„å‘³ç€æ­¤æ—¶å…¶ä»–å±æ€§ä¸ä¸€å®šéƒ½æ„é€ å®Œæˆäº†, å› è€Œä¸èƒ½åœ¨å…¶ä¸­è°ƒç”¨å…¶å®ƒå±æ€§æˆ–ä½¿ç”¨ `self`


<!-- ##{'script':'<script src='https://blog.meekdai.com/assets/GmeekTOC.js'></script>'}## -->ã€‚">
<meta property="og:title" content="[Swift å®˜æ–¹æ•™ç¨‹]14 æ„é€ å‡½æ•°">
<meta property="og:description" content="[Swiftå®˜æ–¹æ–‡æ¡£åŒæ­¥çš„ä¸­æ–‡å¿«é€Ÿå…¥é—¨æ•™ç¨‹](https://github.com/YugenFring/swift-tutorial-quickstart/wiki)

æ„é€ æ˜¯ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºå‰çš„å‡†å¤‡å·¥ä½œ, å…¶é€šè¿‡æ„é€ å‡½æ•°å®ç°
## [ä¸ºå­˜å‚¨å€¼è®¾ç½®åˆå§‹å€¼ (Setting Initial Values for Stored Properties)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization#Setting-Initial-Values-for-Stored-Properties)
---
### [æ„é€ å‡½æ•° (Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializers)

ğŸ• ä½¿ç”¨ `init` åˆ›å»ºæ„é€ å‡½æ•°:
```swift
struct Db {
    var rows: Int
    init() {
        rows = 10
    }
}
```

ğŸ•‘ è°ƒç”¨æ„é€ å‡½æ•°:
```swift
var db = Db()
print(db.rows) // 10
```
### [é»˜è®¤å±æ€§å€¼ (Default Property Values)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Default-Property-Values)

ä¸Šè¿°ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡å±æ€§èµ‹é»˜è®¤å€¼å®ç°:
```swift
struct Db {
    var rows = 10
}
```

> å¦‚æœå®ä¾‹ä¸­çš„å±æ€§çš„é»˜è®¤å€¼æ€»æ˜¯å›ºå®šçš„, é‚£ä¹ˆæœ€å¥½ä½¿ç”¨'é»˜è®¤å±æ€§å€¼'; ä»è¯­æ³•å’Œæ€§èƒ½ä¸Šéƒ½æ›´ä½³
## [å®šåˆ¶æ„é€ å‡½æ•° (Customizing Initialization)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Customizing-Initialization)
---
### [åˆå§‹åŒ–å‚æ•° (Initialization Parameters)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initialization-Parameters)

å¯ä»¥ç»™æ„é€ å‡½æ•°æ·»åŠ å‚æ•°:
```swift
struct Exchange {
    var n: Double
    init(fromUS x: Double) {
        n = x * 7.12
    }
    init(fromJP y: Double) {
        n = y * 0.0048
    }
}

let s1 = Exchange(fromUS: 100)
let s2 = Exchange(fromJP: 100)
print(s1.n, s2.n)
```
### [å‚æ•°åå’Œå®å‚æ ‡ç­¾ (Parameter Names and Argument Labels)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Parameter-Names-and-Argument-Labels)

ğŸ• é€šè¿‡å‚æ•°åå’Œç±»å‹æ¥åŒºåˆ†å¤šä¸ªæ„é€ å‡½æ•°:
```swift
struct Point {
    let x, y, z: Double
    init(x: Double, y: Double, z: Double) {
        self.x = x
        self.y = y
        self.z = z
    }
    init(s: Double) {
        x = s
        y = s
        z = s
    }
}
```

ğŸ•‘ è°ƒç”¨æ—¶å¿…é¡»æŒ‡æ˜å®å‚æ ‡ç­¾:
```swift
let a = Point(x: 1.0, y: 2.1, z: 3.2)
let b = Point(s: 1.8)
```
å¦‚æœæ²¡æœ‰è®¾ç½®å®å‚æ ‡ç­¾, åˆ™ä¼šè‡ªåŠ¨å°†å‚æ•°åè®¾ç½®ä¸ºå®å‚æ ‡ç­¾
### [å¿½ç•¥å®å‚æ ‡ç­¾ (Initializer Parameters Without Argument Labels)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Parameters-Without-Argument-Labels)

ä½¿ç”¨ `_` å¿½ç•¥å®å‚æ ‡ç­¾:
```swift
struct Db {
    var rows: Int
    init(_ num: Int) {
        rows = num
    }
}

var db = Db(10)
```
### [å¯é€‰å€¼ç±»å‹ (Optional Property Types)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Optional-Property-Types)

å¯é€‰å€¼ç±»å‹åœ¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨èµ‹å€¼ä¸º `nil`
### [åˆå§‹åŒ–æ—¶è®¿é—®å¸¸é‡å€¼ (Assigning Constant Properties During Initialization)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Assigning-Constant-Properties-During-Initialization)

å¸¸é‡ä¸€æ—¦èµ‹å€¼åå°±ä¸èƒ½å†ä¿®æ”¹
## [é»˜è®¤æ„é€ å‡½æ•° (Default Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Default-Initializers)
---
`struct` æˆ– `class` ä¼šè‡ªåŠ¨æä¾›æ„é€ å‡½æ•°æ¥å®Œæˆå±æ€§å€¼èµ‹å€¼çš„è¿‡ç¨‹ (å½“æ²¡æœ‰è‡ªå®šä¹‰æ„é€ å‡½æ•°æ—¶)
### [ç»“æ„ä½“çš„æˆå‘˜å¼æ„é€ å‡½æ•° (Memberwise Initializers for Structure Types)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Memberwise-Initializers-for-Structure-Types)
ğŸ• æ²¡æœ‰å…¶ä»–åˆæ„é€ å‡½æ•°æ—¶, ç»“æ„ä½“ä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªå±æ€§æä¾›æ„é€ å‡½æ•°:
```swift
struct Point {
    var x = 0.0, y = 0.0
}
```

ğŸ•‘ è°ƒç”¨å…¶æ„é€ å‡½æ•°:
```swift
let point1 = Point(y: 20.0)
let point2 = Point(x: 10.0)
let point3 = Point(x: 3.0, y: 4.0)
```
## [å€¼ç±»å‹çš„åˆå§‹åŒ–å§”æ´¾ (Initializer Delegation for Value Types)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Delegation-for-Value-Types)
---
ğŸ• æ„é€ å‡½æ•°ä¸­å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°, ä½¿ç”¨ `self.init()`

ğŸ•‘ å¦‚æœè‡ªå®šä¹‰äº†æ„é€ å‡½æ•°, åˆ™é»˜è®¤æ„é€ å‡½æ•°æˆ–æˆå‘˜å¼æ„é€ å‡½æ•°å°†ä¸å¯ç”¨
### ç¤ºä¾‹

ğŸ• å®šä¹‰ä¸€ä¸ªåŒ…å« 3 ä¸ªæ„é€ å‡½æ•°çš„å€¼ç±»å‹:
```swift
struct Point {
    var x = 0.0
    var y = 0.0
    var z = 0.0
    init() {}
    init(x: Double, y: Double, z: Double) {
        self.x = x
        self.y = y
        self.z = z
    }
    init(x: Double, y: Double) {
        let newX = x * 10
        let newY = y * 5
        let newZ = (newX * newY) / 2
        self.init(x: newX, y: newY, z: newZ)
    }
}
```

ğŸ• è°ƒç”¨å…¶æ— å‚æ„é€ å‡½æ•° (è¡Œä¸ºåŒé»˜è®¤æ„é€ å‡½æ•°):
```swift
var p1 = Point()
```

ğŸ•‘ è°ƒç”¨å…¶æœ‰å‚æ„é€ å‡½æ•° (è¡Œä¸ºåŒæˆå‘˜å¼æ„é€ å‡½æ•°):
```swift
var p2 = Point(x: 1.2, y: 1.6, z: 2.8)
```

ğŸ•’ è°ƒç”¨å…·æœ‰åˆå§‹åŒ–å§”æ´¾è¡Œä¸ºçš„æ„é€ å‡½æ•°:
```swift
var p3 = Point(x: 3.2, y: 2.1)
```
## [ç±»çš„ç»§æ‰¿å’Œæ„é€  (Class Inheritance and Initialization)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Class-Inheritance-and-Initialization)
---
è¦ç¡®ä¿æœ¬èº«å®šä¹‰çš„å€¼å’Œç»§æ‰¿æ¥çš„å€¼åœ¨æ„é€ åéƒ½å…·æœ‰åˆå§‹å€¼
### [è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•° (Designated Initializers and Convenience Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Designated-Initializers-and-Convenience-Initializers)

- è®¾è®¡æ„é€ å‡½æ•°: ç¡®ä¿æ‰€æœ‰å±æ€§è¢«æ„é€ åŒ– (å¿…é¡»è¦æœ‰ä¸€ä¸ª)
- ä¾¿åˆ©æ„é€ å‡½æ•°: è°ƒç”¨è®¾è®¡æ„é€ å‡½æ•°, å¯¹æ„é€ è¿‡ç¨‹è¿›è¡Œç®€åŒ–, (æŒ‰æƒ…å†µæ·»åŠ )
### [è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°çš„è¯­æ³• (Syntax for Designated and Convenience Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Syntax-for-Designated-and-Convenience-Initializers)

ğŸ• è®¾è®¡æ„é€ å‡½æ•°:
```swift
init(<#parameters#>) {
   <#statements#>
}
```

ğŸ•‘ ä¾¿åˆ©æ„é€ å‡½æ•°:
```swift
convenience init(<#parameters#>) {
   <#statements#>
}
```
### [ç±»çš„æ„é€ å§”æ‰˜ (Initializer Delegation for Class Types)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Delegation-for-Class-Types)

ğŸ• è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°ç¬¦åˆä»¥ä¸‹ 3 æ¡è§„åˆ™:
- è®¾è®¡æ„é€ å‡½æ•°å¿…é¡»ä»å…¶ç›´æ¥çˆ¶ç±»ä¸­è°ƒç”¨ä¸€ä¸ªè®¾è®¡æ„é€ å‡½æ•°
- ä¾¿åˆ©æ„é€ å‡½æ•°åªèƒ½è°ƒç”¨å½“å‰ç±»ä¸­å…¶ä»–çš„æ„é€ å‡½æ•°
- ä¾¿åˆ©æ„é€ å‡½æ•°æœ€ç»ˆä¸€å®šä¼šè°ƒç”¨ä¸€ä¸ªè®¾è®¡æ„é€ å‡½æ•°

ğŸ•‘ å¦‚ä¸‹å›¾æ‰€ç¤º:
![[Pasted image 20240122133125.png|400]]

ğŸ•’ æ›´å¤æ‚çš„å½¢å¼:
![[Pasted image 20240125110357.png|400]]
### [æ„é€ çš„ä¸¤ä¸ªé˜¶æ®µ (Two-Phase Initialization)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Two-Phase-Initialization)

ğŸ• æ„é€ åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ:
1. ç»™æ‰€æœ‰å­˜å‚¨å±æ€§å€¼èµ‹å€¼
2. å¯¹å®ä¾‹ä¸­çš„å±æ€§è¿›è¡Œä¿®æ”¹ (å®šåˆ¶æ“ä½œ)

ğŸ•‘ ä¸ºäº†ç¡®ä¿æ„é€ çš„å®‰å…¨, ç¼–è¯‘å™¨ä¼šè¿›è¡Œä»¥ä¸‹ 4 ä¸ªæ£€æŸ¥:
- åœ¨è°ƒç”¨çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°å‰, å¿…é¡»ç¡®ä¿é€šè¿‡è‡ªèº«çš„è®¾è®¡æ„é€ å‡½æ•°å°†ä¸ºæ‰€æœ‰å±æ€§è®¾å®šåˆå§‹åŒ–å€¼
- åœ¨ç»™ç»§æ‰¿å±æ€§èµ‹å€¼ä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°, å¦åˆ™ä¼šè¢«çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°è¦†ç›–æ‰
- ä¾¿åˆ©æ„é€ å‡½æ•°åœ¨ç»™ä»»ä½•å±æ€§èµ‹å€¼å‰å¿…é¡»å…ˆè°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°, å¦åˆ™ä¼šè¢«è‡ªèº«çš„è®¾è®¡æ„é€ å‡½æ•°è¦†ç›–
- åªæœ‰æ„é€ çš„ç¬¬ä¸€é˜¶æ®µç»“æŸå, æ‰èƒ½è°ƒç”¨å®ä¾‹ä¸­çš„æ–¹æ³•, è®¿é—®å®ä¾‹ä¸­çš„å±æ€§å€¼ç­‰

ğŸ•’ è¿™æ˜¯ä¸€ä¸ªæ„é€ ç¬¬ä¸€é˜¶æ®µçš„è°ƒç”¨é“¾å›¾ç¤º, ç¡®ä¿æ‰€æœ‰å±æ€§å€¼éƒ½æœ‰åˆå§‹å€¼:
![[Pasted image 20240125140333.png|400]]

éšåç¬¬äºŒé˜¶æ®µçš„å®šåˆ¶æ“ä½œå¼€å§‹æ‰§è¡Œ:
![[Pasted image 20240125140508.png|400]]
### [æ„é€ å‡½æ•°çš„ç»§æ‰¿ä¸é‡å†™ (Initializer Inheritance and Overriding)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Inheritance-and-Overriding)

- é»˜è®¤å­ç±»ä¸ä¼šç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°, å› ä¸ºè¶…ç±»çš„æ„é€ å‡½æ•°ä¸ä¸€å®šèƒ½å¤Ÿæ»¡è¶³å­ç±»çš„è¦æ±‚
- å¦‚æœå­ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¸è¶…ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ç›¸åŒ, è¦åŠ ä¸Š `override`
- å¦‚æœå­ç±»çš„æ„é€ å‡½æ•°ä¸çˆ¶ç±»çš„ä¾¿åˆ©æ„é€ å‡½æ•°ç›¸åŒ, ä¸éœ€è¦åŠ  `override`, å› ä¸ºæŒ‰ç…§ä¹‹å‰çš„è§„åˆ™, å­ç±»æ˜¯æ— æ³•ç›´æ¥è°ƒç”¨çˆ¶ç±»çš„ä¾¿åˆ©æ„é€ å‡½æ•°
#### ç¤ºä¾‹

ğŸ• å®šä¹‰ä¸€ä¸ªåŸºç±»å¹¶è°ƒç”¨:
```swift
class Pet {
    var age = 0
    var say: String {
        return 'I'm \(age) years old.'
    }
}

var p = Pet()
print(p.say) // I'm 0 years old.
```
è¿™é‡Œè‡ªåŠ¨æä¾›äº†è®¾è®¡æ„é€ å‡½æ•°

ğŸ•‘ åˆ›å»ºä¸€ä¸ªå­ç±»å¹¶é‡å†™åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°:
```swift
class Cat: Pet {
    override init() {
        super.init()
        age = 2
    }
}

var c = Cat()
print(c.say) // I'm 2 years old.
```
å› ä¸ºé‡å†™äº†åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°, å› è€Œéœ€è¦ `override`

ğŸ•’ åˆ›å»ºä¸€ä¸ªå­ç±»éšå¼è°ƒç”¨åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°:
```swift
class Dog: Pet {
    var name: String
    init(name: String) {
        self.name = name
        // super.init() éšå¼è°ƒç”¨
    }
    override var say: String {
        return '\(super.say) And call me \(name)'
    }
}

var d = Dog(name: 'Chichi')
print(d.say) // I'm 0 years old. And call me Chichi
```
å› ä¸ºå­ç±»æ²¡æœ‰è¿›è¡Œå®šåˆ¶æ“ä½œ, æ‰€ä»¥åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¼šè¢«éšå¼è°ƒç”¨
### [æ„é€ å‡½æ•°çš„è‡ªåŠ¨ç»§æ‰¿ (Automatic Initializer Inheritance)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Automatic-Initializer-Inheritance)

å¦‚æœå­ç±»ä¸­æ–°å¢çš„å±æ€§éƒ½æä¾›äº†é»˜è®¤å€¼, åˆ™:
- å­ç±»æ²¡æœ‰æä¾›è®¾è®¡æ„é€ å‡½æ•°, åˆ™è¶…ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¼šè¢«è‡ªåŠ¨ç»§æ‰¿
- å­ç±»å®ç°æˆ–ç»§æ‰¿äº†å…¶è¶…ç±»çš„æ‰€æœ‰çš„è®¾è®¡æ„é€ å‡½æ•°, åˆ™è‡ªåŠ¨ç»§æ‰¿è¶…ç±»çš„æ‰€æœ‰ä¾¿åˆ©æ„é€ å‡½æ•°
### [è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°çš„åº”ç”¨ (Designated and Convenience Initializers in Action)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Designated-and-Convenience-Initializers-in-Action)

ğŸ• åŸºç±»:
```swift
class Food {
    var name: String
    init(name: String) {
        self.name = name
    }
    convenience init() {
        self.init(name: '[Unnamed]')
    }
}
```

![[Pasted image 20240122171918.png|400]]

ğŸ•‘ åˆ›å»º `Food` çš„å­ç±», é‡å†™ `init` ä¸ºä¾¿åˆ©æ„é€ å‡½æ•°:
```swift
class RecipeIngredient: Food {
    var quantity: Int
    init(name: String, quantity: Int) {
        self.quantity = quantity
        super.init(name: name)
    }
    override convenience init(name: String) {
        self.init(name: name, quantity: 1)
    }
}
```

![[Pasted image 20240122172017.png|400]]

ğŸ•’ åˆ›å»º `RecipeIngredient` çš„å­ç±»:
```swift
class ShoppingListItem: RecipeIngredient {
    var purchased = false
    var description: String {
        var output = '\(quantity) x \(name)'
        output += purchased ? ' âœ”' : ' âœ˜'
        return output
    }
}
```
å› ä¸ºå…¶æ‰€æœ‰å±æ€§éƒ½å…·æœ‰é»˜è®¤å€¼, å¹¶ä¸”æ²¡æœ‰è‡ªå®šä¹‰ä»»ä½•æ„é€ å‡½æ•°, å› è€Œè‡ªåŠ¨ç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°

![[Pasted image 20240122172224.png|400]]
## [å¯å¤±è´¥çš„æ„é€ å‡½æ•° (Failable Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers)

ğŸ• ä½¿ç”¨ `?` æ ‡è®°è¯¥æ„é€ å‡½æ•°å¯èƒ½ä¼šå¤±è´¥, æ­¤æ—¶å°†è¿”å›è¯¥å®ä¾‹ç±»å‹çš„å¯é€‰å€¼:
```swift
struct Pet {
    let name: String
    init?(name: String) {
        if name.isEmpty { return nil }
        self.name = name
    }
}
```
ä½¿ç”¨ `retrun nil` è¡¨ç¤ºæ„é€ å¤±è´¥

ğŸ•‘ è°ƒç”¨å¹¶è§£åŒ…å¯é€‰å€¼:
```swift
let c = Pet(name: 'mimi')

if let cat = c {
    print(cat.name)
}
```

ğŸ•’ å¯é€‰å€¼ä¸ºç©ºå¯ç›´æ¥åˆ¤æ–­:
```swift
let d = Pet(name: '')

if d == nil {
    print('error')
}
```
### [æšä¸¾ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•° (Failable Initializers for Enumerations)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers-for-Enumerations)

ğŸ• åŸºç¡€ç¤ºä¾‹:
```swift
enum Pet {
    case cat, dog, rabbit
    init?(type: Character) {
        switch type {
        case 'c':
            self = .cat
        case 'd':
            self = .dog
        case 'r':
            self = .rabbit
        default:
            return nil
        }
    }
}
```

ğŸ•‘ è°ƒç”¨ç¤ºä¾‹:
```swift
let p = Pet(type: 'c')
if p != nil {
    print('cat')
}
```
### [å¸¦åŸå§‹å€¼çš„æšä¸¾ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•° (Failable Initializers for Enumerations with Raw Values)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers-for-Enumerations-with-Raw-Values)

å¸¦æœ‰åŸå§‹å€¼çš„æšä¸¾ç±»ä¼šè‡ªåŠ¨æ¥å— `init?(rawValue: )`

ğŸ• é‡‡ç”¨è¿™ç§æ–¹å¼å¯¹ä¸Šé¢çš„æšä¸¾ç±»é‡å†™:
```swift
enum Pet: Character {
    case cat = 'c', dog = 'd', rabbit = 'r'
}
```

ğŸ•‘ è°ƒç”¨ç¤ºä¾‹:
```swift
let p = Pet(rawValue: 'c')
if p != nil {
    print('cat')
}
```
### [åˆå§‹åŒ–å¤±è´¥çš„ä¼ æ’­ (Propagation of Initialization Failure)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Propagation-of-Initialization-Failure)

ç®€å•çš„è¯´å°±æ˜¯é€šè¿‡ç»§æ‰¿é“¾æˆ–è°ƒç”¨é“¾è¿›è¡Œä¼ æ’­

ğŸ• åˆ›å»ºä¸€ä¸ªåŸºç±»:
```swift
class Pet {
    let name: String
    init?(name: String) {
        if name.isEmpty {return nil}
        self.name = name
    }
}
```

ğŸ•‘ ä¸€ä¸ªå­ç±»è°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°:
```swift
class Cat: Pet {
    let age: Int
    init?(name: String, age: Int) {
        if age < 2 { return nil }
        self.age = age
        super.init(name: name)
    }
}
```
å› ä¸ºå­ç±»çš„æ„é€ å‡½æ•°æ˜¯å¯å¤±è´¥çš„, å…¶æ‰èƒ½å¤Ÿè°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°, å¹¶ä¸”ä¸éœ€è¦åŠ  `?`

ğŸ•’ è°ƒç”¨ç¤ºä¾‹:
```swift
if let c = Cat(name: 'mimi', age: 10) {
    print(c.name, c.age)
}
```
### [é‡å†™å¯å¤±è´¥çš„æ„é€ å‡½æ•° (Overriding a Failable Initializer)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Overriding-a-Failable-Initializer)

å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°ä¸ºæ™®é€šæ„é€ å‡½æ•°, åä¹‹ä¸è¡Œ

ğŸ• ç®€å•ç¤ºä¾‹, åˆ›å»ºä¸€ä¸ªåŸºç±»:
```swift
class Pet {
    var name: String?
    init() {}
    init?(name: String) {
        if name.isEmpty { return nil }
        self.name = name
    }
}
```

ğŸ•‘ åˆ›å»ºä¸€ä¸ªå­ç±»é‡å†™åŸºç±»çš„æ„é€ å‡½æ•°:
```swift
class Cat: Pet {
    override init() {
        super.init()
        self.name = '[Unknown]'
    }
    override init(name: String) {
        super.init()
        if name.isEmpty {
            self.name = '[Unknown]'
        } else {
            self.name = name
        }
    }
}
```

ğŸ•’ åˆ›å»ºä¸€ä¸ªå­ç±»é‡å†™åŸºç±»çš„æ„é€ å‡½æ•°, å¹¶è°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°:
```swift
class Dog: Pet {
    override init() {
        super.init(name: '[Unknown]')!
    }
}
```
æ­¤æ—¶è¦åŠ ä¸Š `!`, è¿™è¡¨ç¤ºä½ è®¤ä¸ºè¿™æ ·å·²ç»ç»å¯¹å®‰å…¨äº†
### [éšå¼è§£åŒ…çš„å¯å¤±è´¥æ„é€ å‡½æ•° (The init! Failable Initializer)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#The-init-Failable-Initializer)

ä¹Ÿå°±æ˜¯ `init!()`
## [å¿…è¦çš„æ„é€ å‡½æ•° (Required Initializers)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Required-Initializers)

ğŸ• åœ¨æ„é€ å‡½æ•°å‰ä½¿ç”¨ `required` å…³é”®å­—æ ‡æ˜å­ç±»éƒ½å¿…é¡»è¦å®ç°è¯¥æ„é€ å‡½æ•°:
```swift
class SomeClass {
    required init() {
        // initializer implementation goes here
    }
}
```

ğŸ•‘ åœ¨å­ç±»ä¸­å®ç°è¯¥æ„é€ å‡½æ•°ä¹Ÿå¿…é¡»åŠ ä¸Š `required`, æ­¤æ—¶ä¸å¿…ä½¿ç”¨ `override`
```swift
class SomeSubclass: SomeClass {
    required init() {
        // subclass implementation of the required initializer goes here
    }
}
```
## [ä½¿ç”¨é—­åŒ…æˆ–å‡½æ•°è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ (Setting a Default Property Value with a Closure or Function)](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Setting-a-Default-Property-Value-with-a-Closure-or-Function)

ğŸ• åŸºæœ¬ç»“æ„:
```swift
class SomeClass {
    let someProperty: SomeType = {
        return someValue
    }()
}
```

ğŸ•‘ é—­åŒ…æ˜¯åœ¨æ„é€ çš„è¿‡ç¨‹ä¸­æ‰§è¡Œçš„, è¿™æ„å‘³ç€æ­¤æ—¶å…¶ä»–å±æ€§ä¸ä¸€å®šéƒ½æ„é€ å®Œæˆäº†, å› è€Œä¸èƒ½åœ¨å…¶ä¸­è°ƒç”¨å…¶å®ƒå±æ€§æˆ–ä½¿ç”¨ `self`


<!-- ##{'script':'<script src='https://blog.meekdai.com/assets/GmeekTOC.js'></script>'}## -->ã€‚">
<meta property="og:type" content="article">
<meta property="og:url" content="https://red.237927.xyz/post/%5BSwift%20-guan-fang-jiao-cheng-%5D14%20-gou-zao-han-shu.html">
<meta property="og:image" content="https://red.237927.xyz/avatar.svg">
<title>[Swift å®˜æ–¹æ•™ç¨‹]14 æ„é€ å‡½æ•°</title>
<link href="//unpkg.com/@wooorm/starry-night@2.1.1/style/both.css" rel="stylesheet" />


</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">[Swift å®˜æ–¹æ•™ç¨‹]14 æ„é€ å‡½æ•°</h1>
<div class="title-right">
    <a href="https://red.237927.xyz" id="buttonHome" class="btn btn-invisible circle" title="é¦–é¡µ">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="åˆ‡æ¢ä¸»é¢˜"style="display:none;">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><p><a href="https://github.com/YugenFring/swift-tutorial-quickstart/wiki">Swiftå®˜æ–¹æ–‡æ¡£åŒæ­¥çš„ä¸­æ–‡å¿«é€Ÿå…¥é—¨æ•™ç¨‹</a></p>
<p>æ„é€ æ˜¯ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºå‰çš„å‡†å¤‡å·¥ä½œ, å…¶é€šè¿‡æ„é€ å‡½æ•°å®ç°</p>
<h2><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization#Setting-Initial-Values-for-Stored-Properties" rel="nofollow">ä¸ºå­˜å‚¨å€¼è®¾ç½®åˆå§‹å€¼ (Setting Initial Values for Stored Properties)</a></h2>
<hr>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializers" rel="nofollow">æ„é€ å‡½æ•° (Initializers)</a></h3>
<p>ğŸ• ä½¿ç”¨ <code class="notranslate">init</code> åˆ›å»ºæ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">struct</span> <span class="pl-smi">Db</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">rows</span></span><span class="pl-kos">:</span> <span class="pl-smi">Int</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        rows <span class="pl-c1">=</span> <span class="pl-c1">10</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ è°ƒç”¨æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">var</span> <span class="pl-s1">db</span> <span class="pl-c1">=</span> <span class="pl-en">Db</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-en">print</span><span class="pl-kos">(</span>db<span class="pl-kos">.</span>rows<span class="pl-kos">)</span> <span class="pl-c">// 10</span></pre></div>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Default-Property-Values" rel="nofollow">é»˜è®¤å±æ€§å€¼ (Default Property Values)</a></h3>
<p>ä¸Šè¿°ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡å±æ€§èµ‹é»˜è®¤å€¼å®ç°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">struct</span> <span class="pl-smi">Db</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">rows</span></span> <span class="pl-c1">=</span> <span class="pl-c1">10</span>
<span class="pl-kos">}</span></pre></div>
<blockquote>
<p>å¦‚æœå®ä¾‹ä¸­çš„å±æ€§çš„é»˜è®¤å€¼æ€»æ˜¯å›ºå®šçš„, é‚£ä¹ˆæœ€å¥½ä½¿ç”¨"é»˜è®¤å±æ€§å€¼"; ä»è¯­æ³•å’Œæ€§èƒ½ä¸Šéƒ½æ›´ä½³</p>
</blockquote>
<h2><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Customizing-Initialization" rel="nofollow">å®šåˆ¶æ„é€ å‡½æ•° (Customizing Initialization)</a></h2>
<hr>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initialization-Parameters" rel="nofollow">åˆå§‹åŒ–å‚æ•° (Initialization Parameters)</a></h3>
<p>å¯ä»¥ç»™æ„é€ å‡½æ•°æ·»åŠ å‚æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">struct</span> <span class="pl-smi">Exchange</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">n</span></span><span class="pl-kos">:</span> <span class="pl-smi">Double</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>fromUS x<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        n <span class="pl-c1">=</span> x <span class="pl-c1">*</span> 7.12
    <span class="pl-kos">}</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>fromJP y<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        n <span class="pl-c1">=</span> y <span class="pl-c1">*</span> 0.0048
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">let</span> <span class="pl-s1">s1</span> <span class="pl-c1">=</span> <span class="pl-en">Exchange</span><span class="pl-kos">(</span>fromUS<span class="pl-kos">:</span> <span class="pl-c1">100</span><span class="pl-kos">)</span>
<span class="pl-k">let</span> <span class="pl-s1">s2</span> <span class="pl-c1">=</span> <span class="pl-en">Exchange</span><span class="pl-kos">(</span>fromJP<span class="pl-kos">:</span> <span class="pl-c1">100</span><span class="pl-kos">)</span>
<span class="pl-en">print</span><span class="pl-kos">(</span>s1<span class="pl-kos">.</span>n<span class="pl-kos">,</span> s2<span class="pl-kos">.</span>n<span class="pl-kos">)</span></pre></div>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Parameter-Names-and-Argument-Labels" rel="nofollow">å‚æ•°åå’Œå®å‚æ ‡ç­¾ (Parameter Names and Argument Labels)</a></h3>
<p>ğŸ• é€šè¿‡å‚æ•°åå’Œç±»å‹æ¥åŒºåˆ†å¤šä¸ªæ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">struct</span> <span class="pl-smi">Point</span> <span class="pl-kos">{</span>
    <span class="pl-k">let</span> <span class="pl-s1"><span class="pl-c1">x</span></span><span class="pl-kos">,</span> <span class="pl-s1"><span class="pl-c1">y</span></span><span class="pl-kos">,</span> <span class="pl-s1"><span class="pl-c1">z</span></span><span class="pl-kos">:</span> <span class="pl-smi">Double</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">,</span> y<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">,</span> z<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>x <span class="pl-c1">=</span> x
        <span class="pl-smi">self</span><span class="pl-kos">.</span>y <span class="pl-c1">=</span> y
        <span class="pl-smi">self</span><span class="pl-kos">.</span>z <span class="pl-c1">=</span> z
    <span class="pl-kos">}</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>s<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        x <span class="pl-c1">=</span> s
        y <span class="pl-c1">=</span> s
        z <span class="pl-c1">=</span> s
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ è°ƒç”¨æ—¶å¿…é¡»æŒ‡æ˜å®å‚æ ‡ç­¾:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">let</span> <span class="pl-s1">a</span> <span class="pl-c1">=</span> <span class="pl-en">Point</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> 1.0<span class="pl-kos">,</span> y<span class="pl-kos">:</span> 2.1<span class="pl-kos">,</span> z<span class="pl-kos">:</span> 3.2<span class="pl-kos">)</span>
<span class="pl-k">let</span> <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-en">Point</span><span class="pl-kos">(</span>s<span class="pl-kos">:</span> 1.8<span class="pl-kos">)</span></pre></div>
<p>å¦‚æœæ²¡æœ‰è®¾ç½®å®å‚æ ‡ç­¾, åˆ™ä¼šè‡ªåŠ¨å°†å‚æ•°åè®¾ç½®ä¸ºå®å‚æ ‡ç­¾</p>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Parameters-Without-Argument-Labels" rel="nofollow">å¿½ç•¥å®å‚æ ‡ç­¾ (Initializer Parameters Without Argument Labels)</a></h3>
<p>ä½¿ç”¨ <code class="notranslate">_</code> å¿½ç•¥å®å‚æ ‡ç­¾:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">struct</span> <span class="pl-smi">Db</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">rows</span></span><span class="pl-kos">:</span> <span class="pl-smi">Int</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>_ num<span class="pl-kos">:</span> <span class="pl-smi">Int</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        rows <span class="pl-c1">=</span> num
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">var</span> <span class="pl-s1">db</span> <span class="pl-c1">=</span> <span class="pl-en">Db</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span></pre></div>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Optional-Property-Types" rel="nofollow">å¯é€‰å€¼ç±»å‹ (Optional Property Types)</a></h3>
<p>å¯é€‰å€¼ç±»å‹åœ¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨èµ‹å€¼ä¸º <code class="notranslate">nil</code></p>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Assigning-Constant-Properties-During-Initialization" rel="nofollow">åˆå§‹åŒ–æ—¶è®¿é—®å¸¸é‡å€¼ (Assigning Constant Properties During Initialization)</a></h3>
<p>å¸¸é‡ä¸€æ—¦èµ‹å€¼åå°±ä¸èƒ½å†ä¿®æ”¹</p>
<h2><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Default-Initializers" rel="nofollow">é»˜è®¤æ„é€ å‡½æ•° (Default Initializers)</a></h2>
<hr>
<p><code class="notranslate">struct</code> æˆ– <code class="notranslate">class</code> ä¼šè‡ªåŠ¨æä¾›æ„é€ å‡½æ•°æ¥å®Œæˆå±æ€§å€¼èµ‹å€¼çš„è¿‡ç¨‹ (å½“æ²¡æœ‰è‡ªå®šä¹‰æ„é€ å‡½æ•°æ—¶)</p>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Memberwise-Initializers-for-Structure-Types" rel="nofollow">ç»“æ„ä½“çš„æˆå‘˜å¼æ„é€ å‡½æ•° (Memberwise Initializers for Structure Types)</a></h3>
<p>ğŸ• æ²¡æœ‰å…¶ä»–åˆæ„é€ å‡½æ•°æ—¶, ç»“æ„ä½“ä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªå±æ€§æä¾›æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">struct</span> <span class="pl-smi">Point</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">x</span></span> <span class="pl-c1">=</span> 0.0<span class="pl-kos">,</span> <span class="pl-s1"><span class="pl-c1">y</span></span> <span class="pl-c1">=</span> 0.0
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ è°ƒç”¨å…¶æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">let</span> <span class="pl-s1">point1</span> <span class="pl-c1">=</span> <span class="pl-en">Point</span><span class="pl-kos">(</span>y<span class="pl-kos">:</span> 20.0<span class="pl-kos">)</span>
<span class="pl-k">let</span> <span class="pl-s1">point2</span> <span class="pl-c1">=</span> <span class="pl-en">Point</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> 10.0<span class="pl-kos">)</span>
<span class="pl-k">let</span> <span class="pl-s1">point3</span> <span class="pl-c1">=</span> <span class="pl-en">Point</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> 3.0<span class="pl-kos">,</span> y<span class="pl-kos">:</span> 4.0<span class="pl-kos">)</span></pre></div>
<h2><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Delegation-for-Value-Types" rel="nofollow">å€¼ç±»å‹çš„åˆå§‹åŒ–å§”æ´¾ (Initializer Delegation for Value Types)</a></h2>
<hr>
<p>ğŸ• æ„é€ å‡½æ•°ä¸­å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°, ä½¿ç”¨ <code class="notranslate">self.init()</code></p>
<p>ğŸ•‘ å¦‚æœè‡ªå®šä¹‰äº†æ„é€ å‡½æ•°, åˆ™é»˜è®¤æ„é€ å‡½æ•°æˆ–æˆå‘˜å¼æ„é€ å‡½æ•°å°†ä¸å¯ç”¨</p>
<h3>ç¤ºä¾‹</h3>
<p>ğŸ• å®šä¹‰ä¸€ä¸ªåŒ…å« 3 ä¸ªæ„é€ å‡½æ•°çš„å€¼ç±»å‹:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">struct</span> <span class="pl-smi">Point</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">x</span></span> <span class="pl-c1">=</span> 0.0
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">y</span></span> <span class="pl-c1">=</span> 0.0
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">z</span></span> <span class="pl-c1">=</span> 0.0
    <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">,</span> y<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">,</span> z<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>x <span class="pl-c1">=</span> x
        <span class="pl-smi">self</span><span class="pl-kos">.</span>y <span class="pl-c1">=</span> y
        <span class="pl-smi">self</span><span class="pl-kos">.</span>z <span class="pl-c1">=</span> z
    <span class="pl-kos">}</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">,</span> y<span class="pl-kos">:</span> <span class="pl-smi">Double</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">let</span> <span class="pl-s1">newX</span> <span class="pl-c1">=</span> x <span class="pl-c1">*</span> <span class="pl-c1">10</span>
        <span class="pl-k">let</span> <span class="pl-s1">newY</span> <span class="pl-c1">=</span> y <span class="pl-c1">*</span> <span class="pl-c1">5</span>
        <span class="pl-k">let</span> <span class="pl-s1">newZ</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span>newX <span class="pl-c1">*</span> newY<span class="pl-kos">)</span> <span class="pl-c1">/</span> <span class="pl-c1">2</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> newX<span class="pl-kos">,</span> y<span class="pl-kos">:</span> newY<span class="pl-kos">,</span> z<span class="pl-kos">:</span> newZ<span class="pl-kos">)</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ• è°ƒç”¨å…¶æ— å‚æ„é€ å‡½æ•° (è¡Œä¸ºåŒé»˜è®¤æ„é€ å‡½æ•°):</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">var</span> <span class="pl-s1">p1</span> <span class="pl-c1">=</span> <span class="pl-en">Point</span><span class="pl-kos">(</span><span class="pl-kos">)</span></pre></div>
<p>ğŸ•‘ è°ƒç”¨å…¶æœ‰å‚æ„é€ å‡½æ•° (è¡Œä¸ºåŒæˆå‘˜å¼æ„é€ å‡½æ•°):</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">var</span> <span class="pl-s1">p2</span> <span class="pl-c1">=</span> <span class="pl-en">Point</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> 1.2<span class="pl-kos">,</span> y<span class="pl-kos">:</span> 1.6<span class="pl-kos">,</span> z<span class="pl-kos">:</span> 2.8<span class="pl-kos">)</span></pre></div>
<p>ğŸ•’ è°ƒç”¨å…·æœ‰åˆå§‹åŒ–å§”æ´¾è¡Œä¸ºçš„æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">var</span> <span class="pl-s1">p3</span> <span class="pl-c1">=</span> <span class="pl-en">Point</span><span class="pl-kos">(</span>x<span class="pl-kos">:</span> 3.2<span class="pl-kos">,</span> y<span class="pl-kos">:</span> 2.1<span class="pl-kos">)</span></pre></div>
<h2><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Class-Inheritance-and-Initialization" rel="nofollow">ç±»çš„ç»§æ‰¿å’Œæ„é€  (Class Inheritance and Initialization)</a></h2>
<hr>
<p>è¦ç¡®ä¿æœ¬èº«å®šä¹‰çš„å€¼å’Œç»§æ‰¿æ¥çš„å€¼åœ¨æ„é€ åéƒ½å…·æœ‰åˆå§‹å€¼</p>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Designated-Initializers-and-Convenience-Initializers" rel="nofollow">è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•° (Designated Initializers and Convenience Initializers)</a></h3>
<ul>
<li>è®¾è®¡æ„é€ å‡½æ•°: ç¡®ä¿æ‰€æœ‰å±æ€§è¢«æ„é€ åŒ– (å¿…é¡»è¦æœ‰ä¸€ä¸ª)</li>
<li>ä¾¿åˆ©æ„é€ å‡½æ•°: è°ƒç”¨è®¾è®¡æ„é€ å‡½æ•°, å¯¹æ„é€ è¿‡ç¨‹è¿›è¡Œç®€åŒ–, (æŒ‰æƒ…å†µæ·»åŠ )</li>
</ul>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Syntax-for-Designated-and-Convenience-Initializers" rel="nofollow">è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°çš„è¯­æ³• (Syntax for Designated and Convenience Initializers)</a></h3>
<p>ğŸ• è®¾è®¡æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-c1">&lt;</span>#parameters#<span class="pl-c1">&gt;</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
   <span class="pl-c1">&lt;</span>#statements#<span class="pl-c1">&gt;</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ ä¾¿åˆ©æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k"><span class="pl-k">convenience</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-c1">&lt;</span>#parameters#<span class="pl-c1">&gt;</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
   <span class="pl-c1">&lt;</span>#statements#<span class="pl-c1">&gt;</span>
<span class="pl-kos">}</span></pre></div>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Delegation-for-Class-Types" rel="nofollow">ç±»çš„æ„é€ å§”æ‰˜ (Initializer Delegation for Class Types)</a></h3>
<p>ğŸ• è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°ç¬¦åˆä»¥ä¸‹ 3 æ¡è§„åˆ™:</p>
<ul>
<li>è®¾è®¡æ„é€ å‡½æ•°å¿…é¡»ä»å…¶ç›´æ¥çˆ¶ç±»ä¸­è°ƒç”¨ä¸€ä¸ªè®¾è®¡æ„é€ å‡½æ•°</li>
<li>ä¾¿åˆ©æ„é€ å‡½æ•°åªèƒ½è°ƒç”¨å½“å‰ç±»ä¸­å…¶ä»–çš„æ„é€ å‡½æ•°</li>
<li>ä¾¿åˆ©æ„é€ å‡½æ•°æœ€ç»ˆä¸€å®šä¼šè°ƒç”¨ä¸€ä¸ªè®¾è®¡æ„é€ å‡½æ•°</li>
</ul>
<p>ğŸ•‘ å¦‚ä¸‹å›¾æ‰€ç¤º:<br>
![[Pasted image 20240122133125.png|400]]</p>
<p>ğŸ•’ æ›´å¤æ‚çš„å½¢å¼:<br>
![[Pasted image 20240125110357.png|400]]</p>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Two-Phase-Initialization" rel="nofollow">æ„é€ çš„ä¸¤ä¸ªé˜¶æ®µ (Two-Phase Initialization)</a></h3>
<p>ğŸ• æ„é€ åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ:</p>
<ol>
<li>ç»™æ‰€æœ‰å­˜å‚¨å±æ€§å€¼èµ‹å€¼</li>
<li>å¯¹å®ä¾‹ä¸­çš„å±æ€§è¿›è¡Œä¿®æ”¹ (å®šåˆ¶æ“ä½œ)</li>
</ol>
<p>ğŸ•‘ ä¸ºäº†ç¡®ä¿æ„é€ çš„å®‰å…¨, ç¼–è¯‘å™¨ä¼šè¿›è¡Œä»¥ä¸‹ 4 ä¸ªæ£€æŸ¥:</p>
<ul>
<li>åœ¨è°ƒç”¨çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°å‰, å¿…é¡»ç¡®ä¿é€šè¿‡è‡ªèº«çš„è®¾è®¡æ„é€ å‡½æ•°å°†ä¸ºæ‰€æœ‰å±æ€§è®¾å®šåˆå§‹åŒ–å€¼</li>
<li>åœ¨ç»™ç»§æ‰¿å±æ€§èµ‹å€¼ä¹‹å‰å¿…é¡»å…ˆè°ƒç”¨çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°, å¦åˆ™ä¼šè¢«çˆ¶ç±»çš„è®¾è®¡æ„é€ å‡½æ•°è¦†ç›–æ‰</li>
<li>ä¾¿åˆ©æ„é€ å‡½æ•°åœ¨ç»™ä»»ä½•å±æ€§èµ‹å€¼å‰å¿…é¡»å…ˆè°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°, å¦åˆ™ä¼šè¢«è‡ªèº«çš„è®¾è®¡æ„é€ å‡½æ•°è¦†ç›–</li>
<li>åªæœ‰æ„é€ çš„ç¬¬ä¸€é˜¶æ®µç»“æŸå, æ‰èƒ½è°ƒç”¨å®ä¾‹ä¸­çš„æ–¹æ³•, è®¿é—®å®ä¾‹ä¸­çš„å±æ€§å€¼ç­‰</li>
</ul>
<p>ğŸ•’ è¿™æ˜¯ä¸€ä¸ªæ„é€ ç¬¬ä¸€é˜¶æ®µçš„è°ƒç”¨é“¾å›¾ç¤º, ç¡®ä¿æ‰€æœ‰å±æ€§å€¼éƒ½æœ‰åˆå§‹å€¼:<br>
![[Pasted image 20240125140333.png|400]]</p>
<p>éšåç¬¬äºŒé˜¶æ®µçš„å®šåˆ¶æ“ä½œå¼€å§‹æ‰§è¡Œ:<br>
![[Pasted image 20240125140508.png|400]]</p>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Initializer-Inheritance-and-Overriding" rel="nofollow">æ„é€ å‡½æ•°çš„ç»§æ‰¿ä¸é‡å†™ (Initializer Inheritance and Overriding)</a></h3>
<ul>
<li>é»˜è®¤å­ç±»ä¸ä¼šç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°, å› ä¸ºè¶…ç±»çš„æ„é€ å‡½æ•°ä¸ä¸€å®šèƒ½å¤Ÿæ»¡è¶³å­ç±»çš„è¦æ±‚</li>
<li>å¦‚æœå­ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¸è¶…ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ç›¸åŒ, è¦åŠ ä¸Š <code class="notranslate">override</code></li>
<li>å¦‚æœå­ç±»çš„æ„é€ å‡½æ•°ä¸çˆ¶ç±»çš„ä¾¿åˆ©æ„é€ å‡½æ•°ç›¸åŒ, ä¸éœ€è¦åŠ  <code class="notranslate">override</code>, å› ä¸ºæŒ‰ç…§ä¹‹å‰çš„è§„åˆ™, å­ç±»æ˜¯æ— æ³•ç›´æ¥è°ƒç”¨çˆ¶ç±»çš„ä¾¿åˆ©æ„é€ å‡½æ•°</li>
</ul>
<h4>ç¤ºä¾‹</h4>
<p>ğŸ• å®šä¹‰ä¸€ä¸ªåŸºç±»å¹¶è°ƒç”¨:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">age</span></span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">say</span></span><span class="pl-kos">:</span> <span class="pl-smi">String</span> <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-s">"</span><span class="pl-s">I'm </span><span class="pl-kos">\(</span>age<span class="pl-kos">)</span><span class="pl-s"> years old.</span><span class="pl-s">"</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">var</span> <span class="pl-s1">p</span> <span class="pl-c1">=</span> <span class="pl-en">Pet</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-en">print</span><span class="pl-kos">(</span>p<span class="pl-kos">.</span>say<span class="pl-kos">)</span> <span class="pl-c">// I'm 0 years old.</span></pre></div>
<p>è¿™é‡Œè‡ªåŠ¨æä¾›äº†è®¾è®¡æ„é€ å‡½æ•°</p>
<p>ğŸ•‘ åˆ›å»ºä¸€ä¸ªå­ç±»å¹¶é‡å†™åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Cat</span><span class="pl-kos">:</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k"><span class="pl-k">override</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        super<span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        age <span class="pl-c1">=</span> <span class="pl-c1">2</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">var</span> <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-en">Cat</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-en">print</span><span class="pl-kos">(</span>c<span class="pl-kos">.</span>say<span class="pl-kos">)</span> <span class="pl-c">// I'm 2 years old.</span></pre></div>
<p>å› ä¸ºé‡å†™äº†åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°, å› è€Œéœ€è¦ <code class="notranslate">override</code></p>
<p>ğŸ•’ åˆ›å»ºä¸€ä¸ªå­ç±»éšå¼è°ƒç”¨åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Dog</span><span class="pl-kos">:</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">name</span></span><span class="pl-kos">:</span> <span class="pl-smi">String</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>name <span class="pl-c1">=</span> name
        <span class="pl-c">// super.init() éšå¼è°ƒç”¨</span>
    <span class="pl-kos">}</span>
    <span class="pl-k"><span class="pl-k">override</span></span> <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">say</span></span><span class="pl-kos">:</span> <span class="pl-smi">String</span> <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-s">"</span><span class="pl-kos">\(</span>super<span class="pl-kos">.</span>say<span class="pl-kos">)</span><span class="pl-s"> And call me </span><span class="pl-kos">\(</span>name<span class="pl-kos">)</span><span class="pl-s">"</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span>

<span class="pl-k">var</span> <span class="pl-s1">d</span> <span class="pl-c1">=</span> <span class="pl-en">Dog</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s">Chichi</span><span class="pl-s">"</span><span class="pl-kos">)</span>
<span class="pl-en">print</span><span class="pl-kos">(</span>d<span class="pl-kos">.</span>say<span class="pl-kos">)</span> <span class="pl-c">// I'm 0 years old. And call me Chichi</span></pre></div>
<p>å› ä¸ºå­ç±»æ²¡æœ‰è¿›è¡Œå®šåˆ¶æ“ä½œ, æ‰€ä»¥åŸºç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¼šè¢«éšå¼è°ƒç”¨</p>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Automatic-Initializer-Inheritance" rel="nofollow">æ„é€ å‡½æ•°çš„è‡ªåŠ¨ç»§æ‰¿ (Automatic Initializer Inheritance)</a></h3>
<p>å¦‚æœå­ç±»ä¸­æ–°å¢çš„å±æ€§éƒ½æä¾›äº†é»˜è®¤å€¼, åˆ™:</p>
<ul>
<li>å­ç±»æ²¡æœ‰æä¾›è®¾è®¡æ„é€ å‡½æ•°, åˆ™è¶…ç±»çš„è®¾è®¡æ„é€ å‡½æ•°ä¼šè¢«è‡ªåŠ¨ç»§æ‰¿</li>
<li>å­ç±»å®ç°æˆ–ç»§æ‰¿äº†å…¶è¶…ç±»çš„æ‰€æœ‰çš„è®¾è®¡æ„é€ å‡½æ•°, åˆ™è‡ªåŠ¨ç»§æ‰¿è¶…ç±»çš„æ‰€æœ‰ä¾¿åˆ©æ„é€ å‡½æ•°</li>
</ul>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Designated-and-Convenience-Initializers-in-Action" rel="nofollow">è®¾è®¡æ„é€ å‡½æ•°å’Œä¾¿åˆ©æ„é€ å‡½æ•°çš„åº”ç”¨ (Designated and Convenience Initializers in Action)</a></h3>
<p>ğŸ• åŸºç±»:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Food</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">name</span></span><span class="pl-kos">:</span> <span class="pl-smi">String</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>name <span class="pl-c1">=</span> name
    <span class="pl-kos">}</span>
    <span class="pl-k"><span class="pl-k">convenience</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s">[Unnamed]</span><span class="pl-s">"</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>![[Pasted image 20240122171918.png|400]]</p>
<p>ğŸ•‘ åˆ›å»º <code class="notranslate">Food</code> çš„å­ç±», é‡å†™ <code class="notranslate">init</code> ä¸ºä¾¿åˆ©æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">RecipeIngredient</span><span class="pl-kos">:</span> <span class="pl-smi">Food</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">quantity</span></span><span class="pl-kos">:</span> <span class="pl-smi">Int</span>
    <span class="pl-v">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">,</span> quantity<span class="pl-kos">:</span> <span class="pl-smi">Int</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>quantity <span class="pl-c1">=</span> quantity
        super<span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> name<span class="pl-kos">)</span>
    <span class="pl-kos">}</span>
    <span class="pl-k"><span class="pl-k">override</span></span> <span class="pl-k"><span class="pl-k">convenience</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> name<span class="pl-kos">,</span> quantity<span class="pl-kos">:</span> <span class="pl-c1">1</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>![[Pasted image 20240122172017.png|400]]</p>
<p>ğŸ•’ åˆ›å»º <code class="notranslate">RecipeIngredient</code> çš„å­ç±»:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">ShoppingListItem</span><span class="pl-kos">:</span> <span class="pl-smi">RecipeIngredient</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">purchased</span></span> <span class="pl-c1">=</span> false
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">description</span></span><span class="pl-kos">:</span> <span class="pl-smi">String</span> <span class="pl-kos">{</span>
        <span class="pl-k">var</span> <span class="pl-s1">output</span> <span class="pl-c1">=</span> <span class="pl-s">"</span><span class="pl-kos">\(</span>quantity<span class="pl-kos">)</span><span class="pl-s"> x </span><span class="pl-kos">\(</span>name<span class="pl-kos">)</span><span class="pl-s">"</span>
        output <span class="pl-c1">+=</span> purchased ? <span class="pl-s">"</span><span class="pl-s"> âœ”</span><span class="pl-s">"</span> <span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s"> âœ˜</span><span class="pl-s">"</span>
        <span class="pl-k">return</span> output
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>å› ä¸ºå…¶æ‰€æœ‰å±æ€§éƒ½å…·æœ‰é»˜è®¤å€¼, å¹¶ä¸”æ²¡æœ‰è‡ªå®šä¹‰ä»»ä½•æ„é€ å‡½æ•°, å› è€Œè‡ªåŠ¨ç»§æ‰¿è¶…ç±»çš„æ„é€ å‡½æ•°</p>
<p>![[Pasted image 20240122172224.png|400]]</p>
<h2><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers" rel="nofollow">å¯å¤±è´¥çš„æ„é€ å‡½æ•° (Failable Initializers)</a></h2>
<p>ğŸ• ä½¿ç”¨ <code class="notranslate">?</code> æ ‡è®°è¯¥æ„é€ å‡½æ•°å¯èƒ½ä¼šå¤±è´¥, æ­¤æ—¶å°†è¿”å›è¯¥å®ä¾‹ç±»å‹çš„å¯é€‰å€¼:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">struct</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k">let</span> <span class="pl-s1"><span class="pl-c1">name</span></span><span class="pl-kos">:</span> <span class="pl-smi">String</span>
    <span class="pl-v">init</span><span class="pl-c1">?</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        if name<span class="pl-kos">.</span>isEmpty <span class="pl-kos">{</span> <span class="pl-k">return</span> <span class="pl-smi">nil</span> <span class="pl-kos">}</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>name <span class="pl-c1">=</span> name
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ä½¿ç”¨ <code class="notranslate">retrun nil</code> è¡¨ç¤ºæ„é€ å¤±è´¥</p>
<p>ğŸ•‘ è°ƒç”¨å¹¶è§£åŒ…å¯é€‰å€¼:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">let</span> <span class="pl-s1">c</span> <span class="pl-c1">=</span> <span class="pl-en">Pet</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s">mimi</span><span class="pl-s">"</span><span class="pl-kos">)</span>

if <span class="pl-k">let</span> cat <span class="pl-c1">=</span> c <span class="pl-kos">{</span>
    <span class="pl-en">print</span><span class="pl-kos">(</span>cat<span class="pl-kos">.</span>name<span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•’ å¯é€‰å€¼ä¸ºç©ºå¯ç›´æ¥åˆ¤æ–­:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">let</span> <span class="pl-s1">d</span> <span class="pl-c1">=</span> <span class="pl-en">Pet</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s">"</span><span class="pl-kos">)</span>

if d <span class="pl-c1">==</span> <span class="pl-smi">nil</span> <span class="pl-kos">{</span>
    <span class="pl-en">print</span><span class="pl-kos">(</span><span class="pl-s">"</span><span class="pl-s">error</span><span class="pl-s">"</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers-for-Enumerations" rel="nofollow">æšä¸¾ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•° (Failable Initializers for Enumerations)</a></h3>
<p>ğŸ• åŸºç¡€ç¤ºä¾‹:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">enum</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k">case</span> cat<span class="pl-kos">,</span> dog<span class="pl-kos">,</span> rabbit
    <span class="pl-v">init</span><span class="pl-c1">?</span><span class="pl-kos">(</span>type<span class="pl-kos">:</span> <span class="pl-smi">Character</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        switch type <span class="pl-kos">{</span>
        <span class="pl-k">case</span> <span class="pl-s">"</span><span class="pl-s">c</span><span class="pl-s">"</span><span class="pl-kos">:</span>
            <span class="pl-smi">self</span> <span class="pl-c1">=</span> <span class="pl-kos">.</span>cat
        <span class="pl-k">case</span> <span class="pl-s">"</span><span class="pl-s">d</span><span class="pl-s">"</span><span class="pl-kos">:</span>
            <span class="pl-smi">self</span> <span class="pl-c1">=</span> <span class="pl-kos">.</span>dog
        <span class="pl-k">case</span> <span class="pl-s">"</span><span class="pl-s">r</span><span class="pl-s">"</span><span class="pl-kos">:</span>
            <span class="pl-smi">self</span> <span class="pl-c1">=</span> <span class="pl-kos">.</span>rabbit
        <span class="pl-k">default</span><span class="pl-kos">:</span>
            <span class="pl-k">return</span> <span class="pl-smi">nil</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ è°ƒç”¨ç¤ºä¾‹:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">let</span> <span class="pl-s1">p</span> <span class="pl-c1">=</span> <span class="pl-en">Pet</span><span class="pl-kos">(</span>type<span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s">c</span><span class="pl-s">"</span><span class="pl-kos">)</span>
if p <span class="pl-c1">!=</span> <span class="pl-smi">nil</span> <span class="pl-kos">{</span>
    <span class="pl-en">print</span><span class="pl-kos">(</span><span class="pl-s">"</span><span class="pl-s">cat</span><span class="pl-s">"</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Failable-Initializers-for-Enumerations-with-Raw-Values" rel="nofollow">å¸¦åŸå§‹å€¼çš„æšä¸¾ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•° (Failable Initializers for Enumerations with Raw Values)</a></h3>
<p>å¸¦æœ‰åŸå§‹å€¼çš„æšä¸¾ç±»ä¼šè‡ªåŠ¨æ¥å— <code class="notranslate">init?(rawValue: )</code></p>
<p>ğŸ• é‡‡ç”¨è¿™ç§æ–¹å¼å¯¹ä¸Šé¢çš„æšä¸¾ç±»é‡å†™:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">enum</span> <span class="pl-smi">Pet</span><span class="pl-kos">:</span> <span class="pl-smi">Character</span> <span class="pl-kos">{</span>
    <span class="pl-k">case</span> cat <span class="pl-c1">=</span> <span class="pl-s">"</span><span class="pl-s">c</span><span class="pl-s">"</span><span class="pl-kos">,</span> dog <span class="pl-c1">=</span> <span class="pl-s">"</span><span class="pl-s">d</span><span class="pl-s">"</span><span class="pl-kos">,</span> rabbit <span class="pl-c1">=</span> <span class="pl-s">"</span><span class="pl-s">r</span><span class="pl-s">"</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ è°ƒç”¨ç¤ºä¾‹:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">let</span> <span class="pl-s1">p</span> <span class="pl-c1">=</span> <span class="pl-en">Pet</span><span class="pl-kos">(</span>rawValue<span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s">c</span><span class="pl-s">"</span><span class="pl-kos">)</span>
if p <span class="pl-c1">!=</span> <span class="pl-smi">nil</span> <span class="pl-kos">{</span>
    <span class="pl-en">print</span><span class="pl-kos">(</span><span class="pl-s">"</span><span class="pl-s">cat</span><span class="pl-s">"</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Propagation-of-Initialization-Failure" rel="nofollow">åˆå§‹åŒ–å¤±è´¥çš„ä¼ æ’­ (Propagation of Initialization Failure)</a></h3>
<p>ç®€å•çš„è¯´å°±æ˜¯é€šè¿‡ç»§æ‰¿é“¾æˆ–è°ƒç”¨é“¾è¿›è¡Œä¼ æ’­</p>
<p>ğŸ• åˆ›å»ºä¸€ä¸ªåŸºç±»:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k">let</span> <span class="pl-s1"><span class="pl-c1">name</span></span><span class="pl-kos">:</span> <span class="pl-smi">String</span>
    <span class="pl-v">init</span><span class="pl-c1">?</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        if name<span class="pl-kos">.</span>isEmpty <span class="pl-kos">{</span><span class="pl-k">return</span> <span class="pl-smi">nil</span><span class="pl-kos">}</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>name <span class="pl-c1">=</span> name
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ ä¸€ä¸ªå­ç±»è°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Cat</span><span class="pl-kos">:</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k">let</span> <span class="pl-s1"><span class="pl-c1">age</span></span><span class="pl-kos">:</span> <span class="pl-smi">Int</span>
    <span class="pl-v">init</span><span class="pl-c1">?</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">,</span> age<span class="pl-kos">:</span> <span class="pl-smi">Int</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        if age <span class="pl-c1">&lt;</span> <span class="pl-c1">2</span> <span class="pl-kos">{</span> <span class="pl-k">return</span> <span class="pl-smi">nil</span> <span class="pl-kos">}</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>age <span class="pl-c1">=</span> age
        super<span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> name<span class="pl-kos">)</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>å› ä¸ºå­ç±»çš„æ„é€ å‡½æ•°æ˜¯å¯å¤±è´¥çš„, å…¶æ‰èƒ½å¤Ÿè°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°, å¹¶ä¸”ä¸éœ€è¦åŠ  <code class="notranslate">?</code></p>
<p>ğŸ•’ è°ƒç”¨ç¤ºä¾‹:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate">if <span class="pl-k">let</span> c <span class="pl-c1">=</span> <span class="pl-en">Cat</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s">mimi</span><span class="pl-s">"</span><span class="pl-kos">,</span> age<span class="pl-kos">:</span> <span class="pl-c1">10</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-en">print</span><span class="pl-kos">(</span>c<span class="pl-kos">.</span>name<span class="pl-kos">,</span> c<span class="pl-kos">.</span>age<span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Overriding-a-Failable-Initializer" rel="nofollow">é‡å†™å¯å¤±è´¥çš„æ„é€ å‡½æ•° (Overriding a Failable Initializer)</a></h3>
<p>å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°ä¸ºæ™®é€šæ„é€ å‡½æ•°, åä¹‹ä¸è¡Œ</p>
<p>ğŸ• ç®€å•ç¤ºä¾‹, åˆ›å»ºä¸€ä¸ªåŸºç±»:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k">var</span> <span class="pl-s1"><span class="pl-c1">name</span></span><span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-c1"><span class="pl-c1">?</span></span>
    <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>
    <span class="pl-v">init</span><span class="pl-c1">?</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        if name<span class="pl-kos">.</span>isEmpty <span class="pl-kos">{</span> <span class="pl-k">return</span> <span class="pl-smi">nil</span> <span class="pl-kos">}</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>name <span class="pl-c1">=</span> name
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ åˆ›å»ºä¸€ä¸ªå­ç±»é‡å†™åŸºç±»çš„æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Cat</span><span class="pl-kos">:</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k"><span class="pl-k">override</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        super<span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-smi">self</span><span class="pl-kos">.</span>name <span class="pl-c1">=</span> <span class="pl-s">"</span><span class="pl-s">[Unknown]</span><span class="pl-s">"</span>
    <span class="pl-kos">}</span>
    <span class="pl-k"><span class="pl-k">override</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-smi">String</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        super<span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        if name<span class="pl-kos">.</span>isEmpty <span class="pl-kos">{</span>
            <span class="pl-smi">self</span><span class="pl-kos">.</span>name <span class="pl-c1">=</span> <span class="pl-s">"</span><span class="pl-s">[Unknown]</span><span class="pl-s">"</span>
        <span class="pl-kos">}</span> <span class="pl-k">else</span> <span class="pl-kos">{</span>
            <span class="pl-smi">self</span><span class="pl-kos">.</span>name <span class="pl-c1">=</span> name
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•’ åˆ›å»ºä¸€ä¸ªå­ç±»é‡å†™åŸºç±»çš„æ„é€ å‡½æ•°, å¹¶è°ƒç”¨åŸºç±»çš„å¯å¤±è´¥æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">Dog</span><span class="pl-kos">:</span> <span class="pl-smi">Pet</span> <span class="pl-kos">{</span>
    <span class="pl-k"><span class="pl-k">override</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        super<span class="pl-kos">.</span><span class="pl-en">init</span><span class="pl-kos">(</span>name<span class="pl-kos">:</span> <span class="pl-s">"</span><span class="pl-s">[Unknown]</span><span class="pl-s">"</span><span class="pl-kos">)</span>!
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>æ­¤æ—¶è¦åŠ ä¸Š <code class="notranslate">!</code>, è¿™è¡¨ç¤ºä½ è®¤ä¸ºè¿™æ ·å·²ç»ç»å¯¹å®‰å…¨äº†</p>
<h3><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#The-init-Failable-Initializer" rel="nofollow">éšå¼è§£åŒ…çš„å¯å¤±è´¥æ„é€ å‡½æ•° (The init! Failable Initializer)</a></h3>
<p>ä¹Ÿå°±æ˜¯ <code class="notranslate">init!()</code></p>
<h2><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Required-Initializers" rel="nofollow">å¿…è¦çš„æ„é€ å‡½æ•° (Required Initializers)</a></h2>
<p>ğŸ• åœ¨æ„é€ å‡½æ•°å‰ä½¿ç”¨ <code class="notranslate">required</code> å…³é”®å­—æ ‡æ˜å­ç±»éƒ½å¿…é¡»è¦å®ç°è¯¥æ„é€ å‡½æ•°:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">SomeClass</span> <span class="pl-kos">{</span>
    <span class="pl-k"><span class="pl-k">required</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-c">// initializer implementation goes here</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ åœ¨å­ç±»ä¸­å®ç°è¯¥æ„é€ å‡½æ•°ä¹Ÿå¿…é¡»åŠ ä¸Š <code class="notranslate">required</code>, æ­¤æ—¶ä¸å¿…ä½¿ç”¨ <code class="notranslate">override</code></p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">SomeSubclass</span><span class="pl-kos">:</span> <span class="pl-smi">SomeClass</span> <span class="pl-kos">{</span>
    <span class="pl-k"><span class="pl-k">required</span></span> <span class="pl-v">init</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-c">// subclass implementation of the required initializer goes here</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div>
<h2><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/initialization/#Setting-a-Default-Property-Value-with-a-Closure-or-Function" rel="nofollow">ä½¿ç”¨é—­åŒ…æˆ–å‡½æ•°è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ (Setting a Default Property Value with a Closure or Function)</a></h2>
<p>ğŸ• åŸºæœ¬ç»“æ„:</p>
<div class="highlight highlight-source-swift"><pre class="notranslate"><span class="pl-k">class</span> <span class="pl-smi">SomeClass</span> <span class="pl-kos">{</span>
    <span class="pl-k">let</span> <span class="pl-s1"><span class="pl-c1">someProperty</span></span><span class="pl-kos">:</span> <span class="pl-smi">SomeType</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
        <span class="pl-k">return</span> someValue
    <span class="pl-kos">}</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div>
<p>ğŸ•‘ é—­åŒ…æ˜¯åœ¨æ„é€ çš„è¿‡ç¨‹ä¸­æ‰§è¡Œçš„, è¿™æ„å‘³ç€æ­¤æ—¶å…¶ä»–å±æ€§ä¸ä¸€å®šéƒ½æ„é€ å®Œæˆäº†, å› è€Œä¸èƒ½åœ¨å…¶ä¸­è°ƒç”¨å…¶å®ƒå±æ€§æˆ–ä½¿ç”¨ <code class="notranslate">self</code></p>
</div>
<div style="font-size:small;margin-top:8px;float:right;">â¤ï¸ æ„Ÿè°¢ä½ çš„è®¿é—®ï¼Œæ¬¢è¿ç•™è¨€äº¤æµï¼â¤ï¸</div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">è¯„è®º</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright Â© <span id="copyrightYear"></span> <a href="https://red.237927.xyz">237å·æˆ¿é—´</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if("04/07/2024"!=""){
    var startSite=new Date("04/07/2024");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="ç½‘ç«™è¿è¡Œ"+diffDay+"å¤©"+" â€¢ ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z'};
var utterancesLoad=0;

console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","obtips/obtips.github.io");
    script.setAttribute("issue-term","title");
    
    script.setAttribute("theme","github-light");
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}
</script>
<script src='https://red.234927.xyz/assets/backtotop.js'></script><script src='https://red.234927.xyz/assets/lazyload.js'></script><script src='https://red.234927.xyz/assets/copy.js'></script><script src='https://blog.meekdai.com/assets/GmeekTOC.js'></script>

</html>
